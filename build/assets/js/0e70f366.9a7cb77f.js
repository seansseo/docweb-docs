"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[4330],{848(e,s,n){n.r(s),n.d(s,{assets:()=>o,contentTitle:()=>a,default:()=>h,frontMatter:()=>d,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"features/sessions","title":"Session Management","description":"Sessions allow you to save and manage multiple documentation discoveries. Each session contains the discovered URLs, scraped content, chat history, and graph state for a specific documentation site.","source":"@site/docs/features/sessions.md","sourceDirName":"features","slug":"/features/sessions","permalink":"/docs/features/sessions","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/features/sessions.md","tags":[],"version":"current","frontMatter":{},"sidebar":"docsSidebar","previous":{"title":"Content Extraction","permalink":"/docs/features/content-extraction"},"next":{"title":"Global Caching","permalink":"/docs/features/caching"}}');var t=n(4848),r=n(8453);const d={},a="Session Management",o={},l=[{value:"What is a Session?",id:"what-is-a-session",level:2},{value:"Session Data Model",id:"session-data-model",level:2},{value:"Session Limits by Tier",id:"session-limits-by-tier",level:2},{value:"Using Sessions",id:"using-sessions",level:2},{value:"Creating a Session",id:"creating-a-session",level:3},{value:"Switching Sessions",id:"switching-sessions",level:3},{value:"Session Sidebar Features",id:"session-sidebar-features",level:3},{value:"Session Storage",id:"session-storage",level:2},{value:"Session Operations",id:"session-operations",level:2},{value:"Get Sessions",id:"get-sessions",level:3},{value:"Delete Session",id:"delete-session",level:3},{value:"Update Access Time",id:"update-access-time",level:3},{value:"Cross-Session Features",id:"cross-session-features",level:2},{value:"Shared Embeddings",id:"shared-embeddings",level:3},{value:"Domain Cache",id:"domain-cache",level:3},{value:"Data Persistence",id:"data-persistence",level:2},{value:"Archiving",id:"archiving",level:2},{value:"Best Practices",id:"best-practices",level:2}];function c(e){const s={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.header,{children:(0,t.jsx)(s.h1,{id:"session-management",children:"Session Management"})}),"\n",(0,t.jsx)(s.p,{children:"Sessions allow you to save and manage multiple documentation discoveries. Each session contains the discovered URLs, scraped content, chat history, and graph state for a specific documentation site."}),"\n",(0,t.jsx)(s.h2,{id:"what-is-a-session",children:"What is a Session?"}),"\n",(0,t.jsx)(s.p,{children:"A session represents a complete discovery of a documentation site, including:"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"All discovered URLs with metadata"}),"\n",(0,t.jsx)(s.li,{children:"Scraped content and embeddings"}),"\n",(0,t.jsx)(s.li,{children:"Chat conversation history"}),"\n",(0,t.jsx)(s.li,{children:"Graph visualization state"}),"\n"]}),"\n",(0,t.jsx)(s.h2,{id:"session-data-model",children:"Session Data Model"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-typescript",children:'interface SavedSession {\n    sessionId: string;            // Unique identifier\n    userId: string;               // Owner\'s Firebase UID\n    domain: string;               // e.g., "docs.stripe.com"\n    rootUrl: string;              // Starting URL\n    title: string;                // Session name (derived from domain)\n    urlCount: number;             // Total discovered URLs\n    scrapedCount: number;         // URLs with scraped content\n    messageCount: number;         // Chat messages\n    createdAt: Date;\n    updatedAt: Date;\n    lastAccessedAt: Date;\n    status: "active" | "archived";\n}\n'})}),"\n",(0,t.jsx)(s.h2,{id:"session-limits-by-tier",children:"Session Limits by Tier"}),"\n",(0,t.jsxs)(s.table,{children:[(0,t.jsx)(s.thead,{children:(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.th,{children:"Tier"}),(0,t.jsx)(s.th,{children:"Max Sessions"}),(0,t.jsx)(s.th,{children:"Notes"})]})}),(0,t.jsxs)(s.tbody,{children:[(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"Free"}),(0,t.jsx)(s.td,{children:"5"}),(0,t.jsx)(s.td,{children:"Oldest sessions archived when limit reached"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"Pro"}),(0,t.jsx)(s.td,{children:"20"}),(0,t.jsx)(s.td,{children:"-"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"Max"}),(0,t.jsx)(s.td,{children:"20"}),(0,t.jsx)(s.td,{children:"-"})]})]})]}),"\n",(0,t.jsx)(s.h2,{id:"using-sessions",children:"Using Sessions"}),"\n",(0,t.jsx)(s.h3,{id:"creating-a-session",children:"Creating a Session"}),"\n",(0,t.jsxs)(s.ol,{children:["\n",(0,t.jsx)(s.li,{children:"Enter a documentation URL in the search bar"}),"\n",(0,t.jsxs)(s.li,{children:['Click "Discover" to start the ',(0,t.jsx)(s.a,{href:"/docs/core-concepts/waterfall-discovery",children:"Waterfall Discovery"})]}),"\n",(0,t.jsx)(s.li,{children:"A new session is automatically created and saved"}),"\n"]}),"\n",(0,t.jsx)(s.h3,{id:"switching-sessions",children:"Switching Sessions"}),"\n",(0,t.jsxs)(s.ol,{children:["\n",(0,t.jsx)(s.li,{children:"Click the session in the left sidebar"}),"\n",(0,t.jsx)(s.li,{children:"The graph and chat history load automatically"}),"\n",(0,t.jsx)(s.li,{children:"Continue exploring or chatting where you left off"}),"\n"]}),"\n",(0,t.jsx)(s.h3,{id:"session-sidebar-features",children:"Session Sidebar Features"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Session List"}),": All your saved sessions with domain icons"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Search/Filter"}),": Find sessions by domain name"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"New Session"}),": Button to start a fresh discovery"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Credits Display"}),": Shows remaining credits and reset countdown"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"User Profile"}),": Sign out option"]}),"\n"]}),"\n",(0,t.jsx)(s.h2,{id:"session-storage",children:"Session Storage"}),"\n",(0,t.jsx)(s.p,{children:"Sessions are stored in Firestore:"}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Collection"}),": ",(0,t.jsx)(s.code,{children:"artifacts/{userId}/public/data/sessions/{sessionId}"})]}),"\n",(0,t.jsx)(s.p,{children:"Related data:"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["URLs: ",(0,t.jsx)(s.code,{children:"artifacts/{userId}/public/data/urls/{docId}"})]}),"\n",(0,t.jsx)(s.li,{children:"Chat: Stored per session in conversation subcollection"}),"\n",(0,t.jsxs)(s.li,{children:["Embeddings: ",(0,t.jsx)(s.code,{children:"artifacts/global/embeddings/{urlHash}_chunk{N}"})," (shared)"]}),"\n"]}),"\n",(0,t.jsx)(s.h2,{id:"session-operations",children:"Session Operations"}),"\n",(0,t.jsx)(s.h3,{id:"get-sessions",children:"Get Sessions"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-typescript",children:"// Returns all sessions for the authenticated user\nconst sessions = await getSessions({ appId });\n"})}),"\n",(0,t.jsx)(s.h3,{id:"delete-session",children:"Delete Session"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-typescript",children:"// Deletes session and cascades to URLs/conversations\nawait deleteSession({ appId, sessionId });\n"})}),"\n",(0,t.jsx)(s.h3,{id:"update-access-time",children:"Update Access Time"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-typescript",children:"// Called when user switches to a session\nawait updateSessionAccess({ appId, sessionId });\n"})}),"\n",(0,t.jsx)(s.h2,{id:"cross-session-features",children:"Cross-Session Features"}),"\n",(0,t.jsx)(s.h3,{id:"shared-embeddings",children:"Shared Embeddings"}),"\n",(0,t.jsx)(s.p,{children:"Embeddings are stored globally and shared across sessions:"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["If you discover ",(0,t.jsx)(s.code,{children:"docs.stripe.com"})," and another user already has embeddings for those pages, you benefit from the cached embeddings"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"searchIds"})," array tracks which sessions reference each embedding"]}),"\n"]}),"\n",(0,t.jsx)(s.h3,{id:"domain-cache",children:"Domain Cache"}),"\n",(0,t.jsx)(s.p,{children:"If someone recently discovered the same domain, you may get cached results:"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"24-hour cache TTL"}),"\n",(0,t.jsx)(s.li,{children:"Instant discovery from cache"}),"\n",(0,t.jsx)(s.li,{children:"Fresh discovery after cache expires"}),"\n"]}),"\n",(0,t.jsx)(s.h2,{id:"data-persistence",children:"Data Persistence"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Session metadata"}),": Persists indefinitely (until deleted)"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"URLs and content"}),": Persists with session"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Chat history"}),": Persists with session"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Embeddings"}),": Global, permanent (deduplicated by URL hash)"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Domain cache"}),": 24-hour TTL"]}),"\n"]}),"\n",(0,t.jsx)(s.h2,{id:"archiving",children:"Archiving"}),"\n",(0,t.jsx)(s.p,{children:"When you exceed your session limit:"}),"\n",(0,t.jsxs)(s.ol,{children:["\n",(0,t.jsxs)(s.li,{children:["Oldest sessions by ",(0,t.jsx)(s.code,{children:"lastAccessedAt"})," are marked as ",(0,t.jsx)(s.code,{children:"archived"})]}),"\n",(0,t.jsx)(s.li,{children:"Archived sessions remain in the database but don't count toward limit"}),"\n",(0,t.jsx)(s.li,{children:"You can manually delete sessions to free up slots"}),"\n"]}),"\n",(0,t.jsx)(s.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,t.jsxs)(s.ol,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Name meaningfully"}),": Session titles are auto-generated from domain, but you can identify them by the URL"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Use Deep Dives"}),": Scrape important clusters before chatting for better Dex responses"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Clean up old sessions"}),": Delete sessions you no longer need to stay within limits"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Leverage caching"}),": Re-discovering the same domain uses cached data when available"]}),"\n"]})]})}function h(e={}){const{wrapper:s}={...(0,r.R)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},8453(e,s,n){n.d(s,{R:()=>d,x:()=>a});var i=n(6540);const t={},r=i.createContext(t);function d(e){const s=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function a(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:d(e.components),i.createElement(r.Provider,{value:s},e.children)}}}]);